<!DOCTYPE html>
<html>
<head>
    <title>Image Upload Preview</title>
</head>
<body>

<div id="fileupload_profile_img" class="fileupload_profile_img" accept="image/*">
    <input type="file" id="fileInput" style="display: none;">
    <img id="previewImage" src="#" alt="Preview" style="display: none; max-width: 50px; max-height: 50px;">
    <button type="button" id="uploadButton">이미지 업로드</button>
</div>

<script>
    // 이미지 업로드 버튼 클릭 이벤트
    document.getElementById('fileupload_profile_img').addEventListener('click', function () {
        document.getElementById('fileInput').click(); // 파일 선택 창 열기
    });

    // 파일 선택 시 미리보기 및 업로드
    document.getElementById('fileInput').addEventListener('change', function () {
        var file = this.files[0]; // 선택한 파일 가져오기

        if (file) {
            var reader = new FileReader(); // FileReader 객체 생성

            // 파일 읽기가 완료되었을 때의 이벤트 처리
            reader.onload = function (e) {
                var imgElement = document.getElementById('previewImage');
                imgElement.src = e.target.result; // 이미지 미리보기에 데이터 설정
                imgElement.style.display = 'block'; // 이미지 미리보기 표시
            };

            // 파일을 읽어서 데이터 URL로 설정
            reader.readAsDataURL(file);
        }
    });

    // 이미지 업로드 버튼 클릭 시 파일 선택 창 열림
    document.getElementById('uploadButton').addEventListener('click', function () {
        document.getElementById('fileInput').click();
    });
</script>

</body>
</html>