<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">
<th:block th:insert="~{/header.html::header}"></th:block>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link rel="stylesheet" type="text/css"
	href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
<link rel="stylesheet" type="text/css"
	href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css" />
<script type="text/javascript"
	src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script
	src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<style>
.sub_depth li:first-child a {
	text-decoration: none;
	color: #949494;
	transition: color 0.3s ease;
}

.shop_sub_depth li:first-child a:hover {
	color: black;
}

.goods_wrapper .row>* {
	display: flex;
	flex-direction: row;
}

.item_item img {
	width: 520px;
	height: auto;
	margin-right: 20px;
}

.goods_info {
	flex-grow: 1;
	display: flex;
}

.soldout:hover {
	cursor: not-allowed;
}

.goods_summary table tr {
	color: #4C4C4C;
}

.goods_summary table td {
	color: #4C4C4C;
}

.goods_summary table tr:hover {
	background-color: #F6F6F6;
}

.dropdown a {
	color: black;
	text-decoration: none;
}
#productDetails{
	display: flex;                                                                                   
	flex-wrap: wrap;
}
.gallery {
	display: flex;
	flex-wrap: wrap;
	align-content: space-between;
	justify-content: space-between;
}
</style>
</head>
<body>
	<div layout:fragment="content" class="container">
		<div class="clearfix">
 			<!-- 머릿말 -->
	<div class="shop_sub_depth hidden_xs hidden_sm"
				style="display: block; left: 0;">
				<ul class="sub_depth"
					style="list-style: none; display: flex; align-items: center; padding: 0;">
					<li style="margin-right: 10px;"><a href="/">Home</a> <span
						class="icon-arrow-rigth" style="color: #949494; font-size: 18px;">></span></li>
					<li><a href="/academy/academyList_Free" class="active"
						style="text-decoration: none; color: black;">무료특강</a></li>
				</ul>
			</div>
			<!-- 본문 -->
			<div class="row goods_wrapper">
				<!-- 섬네일 -->
				<div class="goods_info container" style="display: flex;">
					<div class="item_item" style="margin: 0 50px 30px 0;">
						<img alt="" th:src="@{'/images/free/' + ${ac.image} + '.png'}"
							style="width: 520px;">
					</div>
					<!-- 강의제목 -->
					<div class="goods_form container" id="prod_good_form"
						style="padding: 10px 20px 0 40px;">
						<div class="view_tit no_margin_top titoe_font_style">
							<h4>[[${ac.title}]]</h4>
						</div>
						<!-- 모집여부이미지 -->
						<div class="images" style="display: flex;">
							<div th:if="${ac.status == 'N'}" style="margin-right: 5px;">
								<img alt="대기접수중" th:src="@{/images/status_n_btn.png}"
									th:style="'height: 25px;'">
							</div>
							<div
								th:if="${ac.status != 'N' && (ac.count > 0 || ac.status =='y')}">
								<img alt="모집중" th:src="@{/images/status_y_btn.png}"
									th:style="'height: 25px;'">
							</div>
							<div th:if="${ac.count == 0}">
								<img alt="모집마감" th:src="@{/images/count_0_btn.png}"
									th:style="'height: 25px;'">
							</div>
						</div>
						<p>
						<!-- 가격&공유 -->
						<div class="pay_detail full-width" style="display: flex;">
							<div class="pay_number">
								<h5 style="color: blue;">[[${ac.price}]]원</h5>
							</div>
							<div class="comment_num_wrap btn-flat" style="margin-left: auto;">
								<button type="button" class="btn btn-primary"
									data-toggle="modal" data-target="#shareModal">
									<i class="bt I bt-share board-summary-icon active"
										aria-hidden="true"></i>
								</button>
							</div>
							<!-- 공유하기화면 -->
							<div class="modal fade" id="shareModal" tabindex="-1"
								aria-labelledby="shareModalLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="shareModalLabel">공유하기</h5>
											<button type="button" class="close" data-dismiss="modal"
												aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="modal-body">
											<div class="form-group">
												<input type="text" class="form-control" id="urlInput"
													th:value="@{'http://localhost/academy/academyDetail_Free?a_no='+${ac.a_no}}">
											</div>
											<button class="btn btn-primary" onclick="copyUrl()">복사</button>
										</div>
									</div>
								</div>
							</div>
						</div>
						<script>
							function copyUrl() {
								var urlInput = document
										.getElementById("urlInput");

								urlInput.select();
								document.execCommand("copy");

								alert("URL이 복사되었습니다");
							}
						</script>
						<hr style="border-color: #747474;">
						<!-- 강의정보 테이블 -->
						<div class="goods_summary">
							<table class="noBorder tableHover">
								<tr th:if="${ac.intro != null}">
									<td><span><strong>소개</strong></span></td>
									<td><span style="padding-left: 15px;"
										th:text="${ac.intro}"></span></td>
								</tr>
								<tr th:if="${ac.tag != null}">
									<td><span><strong>키워드</strong></span></td>
									<td><span style="padding-left: 15px;" th:text="${ac.tag}"></span></td>
								</tr>
								<tr th:if="${ac.schedule != null}">
									<td><span><strong>일정</strong></span></td>
									<td><span style="padding-left: 15px;"
										th:text="${ac.schedule}"></span></td>
								</tr>
								<tr th:if="${ac.a_name != null}">
									<td><span><strong>강사</strong></span></td>
									<td><span style="padding-left: 15px;"
										th:text="${ac.a_name}"></span></td>
								</tr>
								<tr th:if="${ac.place != null}">
									<td><span><strong>장소</strong></span></td>
									<td><span style="padding-left: 15px;"
										th:text="${ac.place}"></span></td>
								</tr>
								<tr th:if="${ac.count != null}">
									<td><span><strong>정원</strong></span></td>
									<td><span style="padding-left: 15px;"
										th:text="${ac.count}"></span></td>
								</tr>
								<tr th:if="${ac.request != null}">
									<td><span><strong>접수</strong></span></td>
									<td><span style="padding-left: 15px;"
										th:text="${ac.request}"></span></td>
								</tr>
							</table>
						</div>
						<br> <br>
						<!--  회차 선택 -->
						<div class="goods_select">
							<div class="option_title"
								style="font-size: 11px; font-weight: bold;">
								원하는 회차를 모두 선택해 주세요.<span class="option_require">*</span>
							</div>
							<div class="form-select-wrap">
								<div class="dropdown">
									 <button class="btn dropdown-toggle" type="button" 
									 id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
									 원하는 회차를 선택해 주세요. (필수)</button>								
								<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
								    <li th:each="turn : ${ac.turn}" class="dropdown-item">
								    	<a class="blocked" onclick="selectTurn()">
								    	<span th:text="${ac.turn}"></span><br>
								    	<span th:text="${ac.price}"></span>
								    	</a>
									</li>
								  </ul>
								</div>
							</div>
						</div>
						<!-- 선택한 회차에 따른 상품 정보 출력	 -->					
						<div id="productDetails" style="display: none;">
							<div>
								<p id="selectedTurn"></p>
								<p id="productPrice"></p>
								<p id="productQuantity"></p>
							</div>
							<div>
							<button type="button" class="btn-close" aria-label="Close"></button>
							</div>
						</div>
						<script>
							// 회차 선택 시 호출되는 함수
							function selectTurn(turn) {
								var productPrice = '[[${ac.price}]]';
								var productQuantity = '1';

								document.getElementById('selectedTurn').textContent = '[[${ac.turn}]]';
								document.getElementById('productPrice').textContent = productPrice;
								document.getElementById('productQuantity').textContent = productQuantity;

								document.getElementById('productDetails').style.display = 'block';

								var dropdownMenu = document
										.querySelector('.dropdown-menu');
								dropdownMenu.style.display = 'none';
							}
						</script>
						<br>
						<div class="buy_btns" style="display: flex;">
							<div th:if="${ac.count > 0}">
								<button class="btn-buy">신청하기</button>
								<button class="btn-buy">장바구니</button>
							</div>
							<div th:if="${ac.count == 0}">
								<button class="soldout" disabled
									style="background-color: #A3A2FF; color: white; width: 310px; height: 50px; border: none;">
									<span>품절된 상품입니다</span>
								</button>
							</div>
							<button class="wish_button btn like_box"
								style="width: 140px; height: 50px; border: 1px solid black; border-radius: 0; margin-left: 10px;">
								<i class="wish_button_icon">찜</i> <span
									id="prod_detail_wish_count" class="wish_button_count_label">
									[[${찜갯수}]]
								</span>
							</button>
						</div>
					</div>
				</div>
			</div>
			<br> <br>
			<div style="margin-top: 100px;">
				<p>
					<strong> <span>✔️ 회차 별로 신청하실 수 있습니다. 자세한 일정은 옵션을
							확인해 주세요.</span>
					</strong>
				</p>
				<p>
					<strong> <span>✔️ 누구나 신청하실 수 있는 무료 특강입니다.</span>
					</strong>
				</p>
			</div>
			<!-- 강의소개 -->
			<hr style="border-color: #747474;">
			<div>
				<div th:if="${ac.txt_title1} != null">
					<p>
						<span><strong>[[${ac.txt_title1}]]</strong></span>
					</p>
					<p>
						<span><img alt=""
							th:src="@{'/images/free/'+${ac.text1_img} + '.jpg'}"
							style="width: 500px; display: block; margin: 0 auto;"></span>
					</p>
					<p>
						<span>[[${ac.text1}]]</span>
					</p>
				</div>
				<div th:if="${ac.txt_title2 != null}">
					<hr style="border-color: #747474;">
					<p>
						<span><strong>[[${ac.txt_title2}]]</strong></span>
					</p>
					<p>
						<span><img alt=""
							th:src="@{'/images/free/'+${ac.text2_img} + '.jpg'}"
							style="width: 500px; display: block; margin: 0 auto;"></span>
					</p>
					<p>
						<span>[[${ac.text2}]]</span>
					</p>
				</div>
				<div th:if="${ac.txt_title3 != null}">
					<hr style="border-color: #747474;">
					<p>
						<span><strong>[[${ac.txt_title3}]]</strong></span>
					</p>
					<p>
						<span><img alt=""
							th:src="@{'/images/free/'+${ac.text3_img} + '.jpg'}"
							style="width: 500px; display: block; margin: 0 auto;"></span>
					</p>
					<p>
						<span>[[${ac.text3}]]</span>
					</p>
				</div>
				<div th:if="${ac.txt_title4 != null}">
					<hr style="border-color: #747474;">
					<p>
						<span><strong>[[${ac.txt_title4}]]</strong></span>
					</p>
					<p>
						<span><img alt=""
							th:src="@{'/images/free/'+${ac.text4_img} + '.jpg'}"
							style="width: 500px; display: block; margin: 0 auto;"></span>
					</p>
					<p>
						<span>[[${ac.text4}]]</span>
					</p>
				</div>
				<div th:if="${ac.txt_title5} != null">
					<hr style="border-color: #747474;">
					<p>
						<span><strong>[[${ac.txt_title5}]]</strong></span>
					</p>
					<p>
						<span><img alt=""
							th:src="@{'/images/free/'+${ac.text5_img} + '.jpg'}"
							style="width: 500px; display: block; margin: 0 auto;"></span>
					</p>
					<p>
						<span>[[${ac.text5}]]</span>
					</p>
				</div>
				<div th:if="${ac.txt_title6} != null">
					<hr style="border-color: #747474;">
					<p>
						<span><strong>[[${ac.txt_title6}]]</strong></span>
					</p>
					<p>
						<span><img alt=""
							th:src="@{'/images/free/'+${ac.text6_img} + '.jpg'}"
							style="width: 500px; display: block; margin: 0 auto;"></span>
					</p>
					<p>
						<span>[[${ac.text6}]]</span>
					</p>
				</div>
				<hr style="border-color: #747474;">
				<div>
					<p>
						<span><strong>궁금한 게 있나요?</strong></span>
					</p>
					<p>
						<br>
					</p>
					<p>
						<span>유선문의 &nbsp; 02.330.6227</span>
					</p>
					<p>
						<span>카카오톡 문의는 우측 하단의 버튼을 클릭</span>
					</p>
					<p>
						<span>(평일 10-18시 / 점심시간 12-13시)</span>
					</p>
				</div>
				<br>
				<!-- 연계강의  -->
				<div>
					<div class="text-table">
						<p>
							<strong><span>연계 강의</span></strong>
						</p>
					</div>
					<br>
					<div class="shop-content">
					    <div th:if="${ac_list.size() > 0}">
					    	<div class="gallery">
					       		<!-- <th:block  th:each="academy, iterStat : ${ac_list}" >
					       			<div class="item">					          		
					                    <img th:src="@{'/images/photos/' + ${academy.image} + '.png'}" alt="강의 이미지" style="width: 240px;">
					                </div>
					       		 </th:block >
					    <script>
					    $(document).ready(function() {
					        var gallery = $('.gallery');
					        var items = gallery.children('.item');
					        var currentIndex = 0;
					        
					        // 처음에 5개의 객체만 보이도록 숨깁니다.
					        items.slice(5).hide();

					        setInterval(function() {
					            // 현재 인덱스의 아이템을 숨기고 다음 아이템을 보여줍니다.
					            items.eq(currentIndex).hide();
					            currentIndex = (currentIndex + 1) % items.length;
					            items.eq(currentIndex).show();
					        }, 2000);
					    });
						</script> -->
					<div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel" data-bs-wrap="true" data-ds-pause="hover">
					            <div class="carousel-inner">
					               <div th:each="academy, iterStat : ${ac_list}" th:if="${iterStat.index < ac_list.size() - 2}">
					                    <div class="carousel-item" data-bs-interval="3000"
					                    	th:classappend="${iterStat.index == 0} ? 'active'">
					                        <div class="gallery">
					                            <div class="carousel-item active">
					                                <img th:src="@{'/images/photos/' + ${ac_list[iterStat.index].image} + '.png'}"
					                                    alt="강의 이미지" style="width: 240px;">
					                            </div>
					                        </div>
					                    </div>
					                </div>					                
					            </div>
					        </div>
					        </div>
					    </div>
					<div th:if="${ac_list.size() == 0}">
						<div class="body_non">상품이 없습니다.</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>